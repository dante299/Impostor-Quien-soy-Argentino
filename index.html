<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Impostor versión Argentina</title>
<style>
  body { margin:0; font-family: 'Arial', sans-serif; background:black; color:#ccc; }
  .screen { display:none; padding:20px; text-align:center; }
  .active { display:block; }

  /* Inicio */
  #home h1 { color: #ccc; font-size:36px; margin-bottom:60px; text-align:center; }
  #impostorBtn {
    width:250px; height:100px; background: linear-gradient(to bottom, #ff4d4d, #cc0000);
    color:black; font-size:28px; font-weight:bold; border:none; border-radius:20px;
    cursor:pointer; margin:auto; display:block;
    line-height:100px;
  }

  /* Configuración */
  #config select, #config input { margin:10px 0; padding:8px; font-size:16px; width:200px; }
  #playerInputs input { display:block; margin:5px auto; }
  #clueToggle { transform: scale(1.5); margin-left:10px; }

  /* Revelar palabra */
  #revealBox {
    position: relative; width:300px; height:200px; background:black; margin:40px auto;
    border-radius:20px; overflow:hidden; display:flex; align-items:center; justify-content:center; flex-direction:column;
  }
  #cover {
    position:absolute; width:100%; height:100%; background:red; color:black;
    display:flex; align-items:center; justify-content:center; font-weight:bold; cursor:grab; z-index:2;
  }
  #wordDisplay { color:grey; font-size:24px; text-align:center; z-index:1; }

  /* Debate */
  #playersVote button { display:block; margin:5px auto; padding:10px 20px; font-size:16px; cursor:pointer; }
</style>
</head>
<body>

<!-- Pantalla de Inicio -->
<div id="home" class="screen active">
  <h1>Impostor versión Argentina</h1>
  <button id="impostorBtn" onclick="goConfig()">IMPOSTOR</button>
</div>

<!-- Configuración -->
<div id="config" class="screen">
  <h2>Configuración de la partida</h2>
  <div>
    <label>Cantidad de jugadores:</label>
    <select id="playersCount" onchange="updatePlayers()">
      <option value="3">3</option><option value="4">4</option><option value="5">5</option>
      <option value="6">6</option><option value="7">7</option><option value="8">8</option>
      <option value="9">9</option><option value="10">10</option><option value="11">11</option>
      <option value="12">12</option>
    </select>
  </div>
  <div id="playerInputs"></div>
  <div>
    <label>Cantidad de impostores:</label>
    <select id="impostorsCount">
      <option value="1">1</option><option value="2">2</option><option value="3">3</option>
    </select>
  </div>
  <div>
    <label>Tiempo de debate:</label>
    <select id="debateTime">
      <option value="1">1 minuto</option><option value="2">2 minutos</option>
      <option value="3">3 minutos</option><option value="4">4 minutos</option>
      <option value="5">5 minutos</option><option value="6">6 minutos</option>
      <option value="7">7 minutos</option>
    </select>
  </div>
  <div>
    <label>Pista:</label>
    <input type="checkbox" id="clueToggle"> On/Off
  </div>
  <button onclick="startGame()">Nueva Partida</button>
</div>

<!-- Revelar palabra -->
<div id="reveal" class="screen">
  <h2 id="playerName"></h2>
  <div id="revealBox">
    <div id="cover">DESLIZAR</div>
    <div id="wordDisplay"></div>
  </div>
  <button id="nextBtn" onclick="next()">Siguiente jugador</button>
</div>

<!-- Debate -->
<div id="debate" class="screen">
  <h2>Debate</h2>
  <div id="playersVote"></div>
  <button onclick="startVote()">Votar</button>
</div>

<script>
  const palabras = [
    { palabra:"Asado", categoria:"Comida", pista:"DOMINGO" },
    { palabra:"Mate", categoria:"Bebida", pista:"INFUSIÓN" },
    { palabra:"Maradona", categoria:"Futbolista", pista:"PELO RIZADO" }
  ];

  let palabra, categoria, pista;
  let players = [];
  let impostors = [];
  let current = 0;

  const playerName = document.getElementById("playerName");
  const cover = document.getElementById("cover");
  const wordDisplay = document.getElementById("wordDisplay");

  function show(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function goConfig() { show('config'); }

  function updatePlayers() {
    const count = parseInt(document.getElementById("playersCount").value);
    const container = document.getElementById("playerInputs");
    container.innerHTML="";
    for(let i=1;i<=count;i++){
      const input=document.createElement("input");
      input.placeholder="Jugador "+i;
      container.appendChild(input);
    }
  }

  function startGame(){
    const total = parseInt(document.getElementById("playersCount").value);
    const impCount = parseInt(document.getElementById("impostorsCount").value);

    // Elegir palabra aleatoria
    const rand = palabras[Math.floor(Math.random()*palabras.length)];
    palabra = rand.palabra; categoria = rand.categoria; pista = rand.pista;

    // Crear jugadores
    players=[];
    for(let i=1;i<=total;i++) players.push("Jugador "+i);

    // Elegir impostores
    impostors=[];
    while(impostors.length<impCount){
      const r=Math.floor(Math.random()*total);
      if(!impostors.includes(r)) impostors.push(r);
    }

    current=0;
    reveal();
  }

  function reveal(){
    show('reveal');
    playerName.innerText = players[current];
    wordDisplay.innerHTML = "";

    cover.style.top="0px"; cover.style.height="100%";
    cover.innerText="DESLIZAR";

    cover.onmousedown=startDrag;
  }

  function startDrag(e){
    e.preventDefault();
    const startY = e.clientY;
    const startHeight = cover.offsetHeight;

    function onMouseMove(ev){
      let diff=startY-ev.clientY;
      let newHeight=Math.max(0,startHeight-diff);
      cover.style.height=newHeight+"px";

      // Mostrar palabra mientras desliza
      if(impostors.includes(current)){
        const clueOn=document.getElementById("clueToggle").checked;
        if(clueOn) wordDisplay.innerHTML='<span style="color:red;font-weight:bold;">¡IMPOSTOR!</span><br><span style="font-size:18px;">'+pista+'</span>';
        else wordDisplay.innerHTML='<span style="color:red;font-weight:bold;">¡IMPOSTOR!</span>';
      } else {
        wordDisplay.innerText=palabra;
      }
    }

    function onMouseUp(){
      document.removeEventListener("mousemove",onMouseMove);
      document.removeEventListener("mouseup",onMouseUp);
    }

    document.addEventListener("mousemove",onMouseMove);
    document.addEventListener("mouseup",onMouseUp);
  }

  function next(){
    current++;
    if(current<players.length) reveal();
    else startDebate();
  }

  function startDebate(){
    show('debate');
    const container=document.getElementById("playersVote");
    container.innerHTML="";
    players.forEach(p=>{
      const btn=document.createElement("button");
      btn.innerText=p;
      btn.onclick=()=>alert("Votaste a "+p);
      container.appendChild(btn);
    });
    startTimer(parseInt(document.getElementById("debateTime").value)*60);
  }

  function startVote(){
    alert("Aquí se implementaría la votación real.");
  }

  function startTimer(seconds){
    let timeLeft=seconds;
    const interval=setInterval(()=>{
      console.log(timeLeft);
      timeLeft--;
      if(timeLeft<0) clearInterval(interval);
    },1000);
  }
</script>
</body>
</html>
